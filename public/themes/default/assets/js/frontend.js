var app=angular.module("app",["ngAnimate","ngMessages","ngSanitize","ui.select","ngDialog","infinite-scroll","angularGrid","pusher-angular"]).value("THROTTLE_MILLISECONDS",5e3),template_path="/themes/default/views/segments/";app.config(function(e){e.setForceHtmlReload(!0)}),app.controller("MainController",["$scope","ngDialog","shotFactory",function(e,t,n){e.toggle=!1,e.showForm=!1,e.searching=!1,e.links=n.getParmalinks(),e.config={autoHideScrollbar:!1,theme:"light",advanced:{updateOnContentResize:!0},setHeight:200,scrollInertia:0},e.toggleSidebar=function(){e.toggle=!e.toggle},e.regsign=function(e){history.pushState({},"","/"+e),t.open({closeByNavigation:!0,cache:!1,template:template_path+e+".html",className:"small-oval-theme",controller:"authController",preCloseCallback:function(){return history.back(),!0}})},e.showShotPoster=function(){t.open({closeByNavigation:!0,cache:!1,template:template_path+"shot-upload.html",className:"mt-large-overlay",controller:"shotsController"})}}]),app.controller("authController",["$scope",function(e,t){e.token=angular.element(document.getElementById("csrf")).val()}]),app.controller("shotsController",["$scope","ngDialog","$window","shotsFactory","$timeout","$pusher","$filter",function(e,t,n,a,r,i,o){function s(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}var l=new Pusher("67b6f9a2b88b9350c8fa"),p=i(l);e.shots=[],e.busy=!1,e.after="/?page=1",e.per_page=0;var c=window.location.pathname.split("/"),f=c[2],h=s("cat")||null,u=s("page",e.after);p.subscribe("shotsChannel"),e.getShots=function(t,n,r){a.index(t,n,r).then(function(t){var n=t.data.data;e.per_page=e.per_page+t.data.per_page,angular.forEach(n,function(t,n){e.shots.push(t)}),e.after=t.data.next_page_url,u=s("page",e.after)})},e.updateShots=function(t){e.busy||u&&(e.busy=!0,e.getShots(t,f,{cat:h,page:u}),e.busy=!1)},e.open=function(n){n=n.replace(/\.[^\/.]+$/,"");var a=e.$new();a.name=n,history.pushState({},"","/shot/"+n),t.open({closeByNavigation:!0,cache:!1,template:template_path+"shots_overlay.html",className:"mt-shots-overlay",controller:"ovalController",scope:a,preCloseCallback:function(){return history.back(),!0}})},p.bind("shotWasViewed",function(t){var n=o("findByName")(e.shots,t.name);n.views++})}]),app.filter("findByName",function(){return function(e,t){for(var n=0,a=e.length;a>n;n++){var r=e[n].file_name.replace(/\.[^\/.]+$/,"");if(r==t)return e[n]}return null}}),app.controller("ovalController",["$scope","shotFactory","$timeout",function(e,t,n){t.show(e.name).then(function(t){e.shot=t.data}),n(function(){t.viewed(e.name)},1500)}]),app.controller("shotController",["$scope","shotFactory","$timeout","$window",function(e,t,n,a){var r=a.location.href;r=r.substring(r.lastIndexOf("/")+1),n(function(){t.viewed(r)},1500)}]),app.controller("designersController",["$scope","shotFactory",function(e,t){}]),app.factory("shotFactory",["$http",function(e){return this.show=function(t){return e.get("/api/shot/"+t)},this.viewed=function(t){return e.post("/api/shot/viewed/"+t)},this.getParmalinks=function(){var e=[{name:"Type",dropElements:[{link:"/explore/african-prints-shirts",text:"Shirt"},{link:"/explore/african-fashion-dress",text:"Dresses"},{link:"/explore/african-fashion-blazers",text:"Blazers"},{link:"/explore/african-fashion-outfits",text:"Outfits"},{link:"/explore/african-fashion-jackets",text:"Jackets"},{link:"/explore/african-fashion-prints-women",text:"Women"},{link:"/explore/african-prints-pants",text:"Pants"},{link:"/explore/african-fashion-prints-bikini",text:"Bikini"},{link:"/explore/african-prints-swimwear",text:"Swimwear"},{link:"/explore/african-fashion-prints-tops",text:"Tops"},{link:"/explore/african-prints-skirts",text:"Skirts"},{link:"/explore/african-fashion-prints-hijab",text:"Hijab"},{link:"/explore/african-fashion-prints-men",text:"For Men"},{link:"/explore/african-fashion-prints-summer-wears",text:"summer"},{link:"/explore/african-prints-shorts",text:"Shorts"}]},{name:"Style",dropElements:[{link:"/explore/african-fashion-prints",text:"Prints"},{link:"/explore/african-fashion-classic-wears",text:"Classic"},{link:"/explore/african-prints-modern",text:"Modern"},{link:"/explore/african-fashion-classic-wears",text:"Classic"},{link:"/explore/african-fashion-prints-ankara",text:"Ankara"},{link:"/explore/african-prints-kitenge",text:"Kitenge"},{link:"/explore/african-fashion-prints-leather",text:"Leather"},{link:"/explore/african-fashion-prints-ankara",text:"Ankara"},{link:"/explore/african-prints-lace",text:"Lace"},{link:"/explore/african-fashion-prints-dashiki",text:"Dashiki"}]},{name:"Accessories",dropElements:[{link:"/explore/african-prints-necklace",text:"Necklaces"},{link:"/explore/african-prints-headwrap",text:"Head wrap"}]},{name:"Occassional",dropElements:[{link:"/explore/african-prints-wedding",text:"Wedding"},{link:"/explore/african-prints-work-wears",text:"work"},{link:"/explore/african-prints-party-wear",text:"Party"},{link:"/explore/african-prints-special",text:"special"}]}];return e},this}]),app.factory("shotsFactory",["$http",function(e){return this.items=[],this.busy=!1,this.after="",this.index=function(t,n,a){return e.get("/api/"+t+"/"+n,{params:a})},this}]);